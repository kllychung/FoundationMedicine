<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:3,&quot;tests&quot;:4,&quot;passes&quot;:4,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2023-06-12T17:37:26.898Z&quot;,&quot;end&quot;:&quot;2023-06-12T17:37:36.276Z&quot;,&quot;duration&quot;:9378,&quot;testsRegistered&quot;:4,&quot;passPercent&quot;:100,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;13abf6da-3757-4fdd-85f2-3aff193ee060&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;fullTitle&quot;:&quot;\&quot;after all\&quot; hook in \&quot;{root}\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dynamoDbClient.delete({\n    TableName: DYNAMO_TABLE_NAME,\n    Key: {\n        email: registeredUser.email\n    }\n}).promise()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;379e8e06-a754-433d-a593-cdccfa090d43&quot;,&quot;parentUUID&quot;:&quot;13abf6da-3757-4fdd-85f2-3aff193ee060&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;940eb6b9-9056-4ec0-9e66-dd8b02f25294&quot;,&quot;title&quot;:&quot;Login endpoint tests&quot;,&quot;fullFile&quot;:&quot;/Users/kellychung/Documents/FoundationMedicine/user-app/api_tests/login_test.js&quot;,&quot;file&quot;:&quot;/login_test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Login endpoint tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Login endpoint tests \&quot;before all\&quot; hook in \&quot;Login endpoint tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2545,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const registerPostOption = {\n    ...REGISTER_POST_OPTIONS,\n    data: new URLSearchParams(registeredUser)\n};\n//register user\nawait axios.request(registerPostOption)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03cec79e-c933-4df7-81bb-13ed250ae828&quot;,&quot;parentUUID&quot;:&quot;940eb6b9-9056-4ec0-9e66-dd8b02f25294&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Login endpoint tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Login endpoint tests \&quot;after all\&quot; hook in \&quot;Login endpoint tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;// const deleteUserEndpoint = DELETE_ENDPOINT_URL + registeredUser.email;\n// const deleteOptions = {\n//     method: &#x27;DELETE&#x27;,\n//     url: deleteUserEndpoint,\n// };\n// await axios.request(deleteOptions)\nafter(async () =&gt; {\n    await dynamoDbClient.delete({\n        TableName: DYNAMO_TABLE_NAME,\n        Key: {\n            email: registeredUser.email\n        }\n    }).promise()\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f9f1d56-eada-46e7-926e-5af27549cf2c&quot;,&quot;parentUUID&quot;:&quot;940eb6b9-9056-4ec0-9e66-dd8b02f25294&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;Successful login returns valid token&quot;,&quot;fullTitle&quot;:&quot;Login endpoint tests Successful login returns valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2706,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;loginPostOption[&#x27;data&#x27;] = new URLSearchParams(registeredUser)\n//Fill login form with valid login info\nconst postResponse = await axios.request(loginPostOption)\n//Verify api returns valid token\nexpect(postResponse.data).to.include.keys(\&quot;access_token\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39066f0a-e054-432d-8576-6a0042fe774b&quot;,&quot;parentUUID&quot;:&quot;940eb6b9-9056-4ec0-9e66-dd8b02f25294&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Unregistered user cannot login&quot;,&quot;fullTitle&quot;:&quot;Login endpoint tests Unregistered user cannot login&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const unregisteredUser = USERS[\&quot;unregisteredUser\&quot;]\nloginPostOption[&#x27;data&#x27;] = new URLSearchParams(unregisteredUser)\nlet error, response;\n//Fill login form with valid login info\ntry {\n    response = await axios.request(loginPostOption)\n}\ncatch (err) {\n    error = err\n}\nexpect(error.response.status).to.equal(401)\nexpect(error.response.data.error_message).to.equal(\&quot;unauthorized\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63cf48ad-26ef-418e-970a-48a32f6a3a37&quot;,&quot;parentUUID&quot;:&quot;940eb6b9-9056-4ec0-9e66-dd8b02f25294&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39066f0a-e054-432d-8576-6a0042fe774b&quot;,&quot;63cf48ad-26ef-418e-970a-48a32f6a3a37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2909,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;a72fbde4-f96f-4038-af01-fec9f23d7e3e&quot;,&quot;title&quot;:&quot;Register post endpoints tests&quot;,&quot;fullFile&quot;:&quot;/Users/kellychung/Documents/FoundationMedicine/user-app/api_tests/register_test.js&quot;,&quot;file&quot;:&quot;/register_test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Register post endpoints tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Register post endpoints tests \&quot;after all\&quot; hook in \&quot;Register post endpoints tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:94,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dynamoDbClient.delete({\n    TableName: DYNAMO_TABLE_NAME,\n    Key: {\n        email: userToBeRegsistered.email\n    }\n}).promise()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;526383fa-623a-4ddd-96ce-1d0a2fe41433&quot;,&quot;parentUUID&quot;:&quot;a72fbde4-f96f-4038-af01-fec9f23d7e3e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;user info is created in dynamo db&quot;,&quot;fullTitle&quot;:&quot;Register post endpoints tests user info is created in dynamo db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:339,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const postOption = {\n            method: &#x27;POST&#x27;,\n            url: REGISTER_ENPOINT_URL,\n            headers: { &#x27;content-type&#x27;: &#x27;application/x-www-form-urlencoded&#x27; },\n            data: new URLSearchParams(userToBeRegsistered)\n        };\n        //Fill registration with valid info and submit form\n        await axios.request(postOption)\n        //Make a get request to retrieve user from dynamo db\n        const getUserResponse = await dynamoDbClient.get({\n            TableName: DYNAMO_TABLE_NAME,\n            Key: {\n                email: userToBeRegsistered.email,\n            }\n        }).promise()\n        expect(userToBeRegsistered).to.eql(getUserResponse.Item);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d1da8ad-e2e4-4a38-a3ef-5190688e94bb&quot;,&quot;parentUUID&quot;:&quot;a72fbde4-f96f-4038-af01-fec9f23d7e3e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d1da8ad-e2e4-4a38-a3ef-5190688e94bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:339,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;e9f806d6-4b6b-498f-a758-02085e52e89b&quot;,&quot;title&quot;:&quot;Treasure endpoint tests&quot;,&quot;fullFile&quot;:&quot;/Users/kellychung/Documents/FoundationMedicine/user-app/api_tests/treasure_test.js&quot;,&quot;file&quot;:&quot;/treasure_test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Treasure endpoint tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Treasure endpoint tests \&quot;before all\&quot; hook in \&quot;Treasure endpoint tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:198,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const registerPostOption = {\n    ...REGISTER_POST_OPTIONS,\n    data: new URLSearchParams(registeredUser)\n};\n//register user\nawait axios.request(registerPostOption)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f741b1bc-519e-44df-8a43-a06c4cbb2dae&quot;,&quot;parentUUID&quot;:&quot;e9f806d6-4b6b-498f-a758-02085e52e89b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Treasure endpoint tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Treasure endpoint tests \&quot;after all\&quot; hook in \&quot;Treasure endpoint tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:102,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;await dynamoDbClient.delete({\n    TableName: DYNAMO_TABLE_NAME,\n    Key: {\n        email: registeredUser.email\n    }\n}).promise()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62991fe0-f428-4c44-942f-4c41aad88263&quot;,&quot;parentUUID&quot;:&quot;e9f806d6-4b6b-498f-a758-02085e52e89b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;User can access protected resource using valid token&quot;,&quot;fullTitle&quot;:&quot;Treasure endpoint tests User can access protected resource using valid token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3091,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;code&quot;:&quot;const loginPostOption = {\n    ...LOGIN_POST_OPTIONS\n};\nloginPostOption[&#x27;data&#x27;] = new URLSearchParams(registeredUser)\n//Get &amp; store token from login response \nconst postResponse = await axios.request(loginPostOption)\nconst token = postResponse.data.access_token\nconst getTreasureOption = {\n    method: &#x27;GET&#x27;,\n    url: TREASURE_ENPOINT_URL,\n    headers: {\n        &#x27;Authorization&#x27;: &#x27;Bearer &#x27; + token\n    }\n};\n//Access protected resource\nconst getTreasureResponse = await axios.request(getTreasureOption)\nexpect(getTreasureResponse.status).to.equal(200)\nexpect(getTreasureResponse.data).to.include(\&quot;Private treasure\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3b4a326-e4f4-4c97-aae2-15513d09f457&quot;,&quot;parentUUID&quot;:&quot;e9f806d6-4b6b-498f-a758-02085e52e89b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3b4a326-e4f4-4c97-aae2-15513d09f457&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3091,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;10.2.0&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;api_tests&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:true,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;jsonFile&quot;:&quot;/Users/kellychung/Documents/FoundationMedicine/user-app/api_tests/mochawesome-report/mochawesome.json&quot;,&quot;htmlFile&quot;:&quot;/Users/kellychung/Documents/FoundationMedicine/user-app/api_tests/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>